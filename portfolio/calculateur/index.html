<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateurs Pratiques - Premium</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>

<body>
    <!-- Particules de fond -->
    <canvas id="particles"></canvas>

    <!-- Toggle Dark Mode -->
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <span class="sun-icon">‚òÄÔ∏è</span>
        <span class="moon-icon">üåô</span>
    </button>

    <a href="../index.html" class="back-button">‚Üê Accueil</a>

    <div class="container">
        <!-- Header avec animation -->
        <div class="header-animated">
            <h1 class="glitch" data-text="Calculateurs Premium">Calculateurs Premium</h1>
            <p class="subtitle">Exp√©rience utilisateur nouvelle g√©n√©ration</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('pourboire')" data-tooltip="Calculez vos pourboires facilement">
                <span class="tab-icon">üí∞</span>
                <span class="tab-text">Pourboire</span>
            </button>
            <button class="tab" onclick="switchTab('imc')" data-tooltip="Indice de Masse Corporelle">
                <span class="tab-icon">‚öñÔ∏è</span>
                <span class="tab-text">IMC</span>
            </button>
            <button class="tab" onclick="switchTab('conversion')" data-tooltip="Convertisseur universel">
                <span class="tab-icon">üîÑ</span>
                <span class="tab-text">Conversion</span>
            </button>
            <button class="tab" onclick="switchTab('historique')" data-tooltip="Vos derniers calculs">
                <span class="tab-icon">üìä</span>
                <span class="tab-text">Historique</span>
            </button>
        </div>

        <div class="content">
            <!-- Calculateur de Pourboire -->
            <div id="pourboire" class="calculator active">
                <h2>üí∞ Calculateur de Pourboire</h2>

                <div class="input-group floating-label">
                    <input type="number" id="montant" placeholder=" " step="0.01" min="0" required>
                    <label for="montant">Montant de l'addition (‚Ç¨)</label>
                    <span class="input-icon">üí∂</span>
                </div>

                <div class="input-group">
                    <label>Pourcentage de pourboire</label>
                    <div class="tip-options">
                        <button class="tip-btn" onclick="selectTip(10)" data-ripple>
                            <span class="tip-percent">10%</span>
                            <span class="tip-emoji">üòä</span>
                        </button>
                        <button class="tip-btn selected" onclick="selectTip(15)" data-ripple>
                            <span class="tip-percent">15%</span>
                            <span class="tip-emoji">üòÑ</span>
                        </button>
                        <button class="tip-btn" onclick="selectTip(20)" data-ripple>
                            <span class="tip-percent">20%</span>
                            <span class="tip-emoji">ü§©</span>
                        </button>
                        <button class="tip-btn" onclick="selectTip(25)" data-ripple>
                            <span class="tip-percent">25%</span>
                            <span class="tip-emoji">üåü</span>
                        </button>
                    </div>
                </div>

                <div class="input-group floating-label">
                    <input type="number" id="custom-tip" placeholder=" " min="0" max="100" step="0.1">
                    <label for="custom-tip">Ou personnalis√© (%)</label>
                    <span class="input-icon">‚ú®</span>
                </div>

                <div class="input-group floating-label">
                    <input type="number" id="personnes" placeholder=" " min="1" value="1" required>
                    <label for="personnes">Nombre de personnes</label>
                    <span class="input-icon">üë•</span>
                </div>

                <button class="btn-primary" onclick="calculerPourboire()" data-ripple>
                    <span class="btn-text">Calculer</span>
                    <span class="btn-icon">‚Üí</span>
                </button>

                <div id="result-pourboire" class="result">
                    <!-- Graphique circulaire -->
                    <div class="chart-container">
                        <svg class="donut-chart" viewBox="0 0 200 200">
                            <circle class="donut-segment donut-base" cx="100" cy="100" r="80" />
                            <circle class="donut-segment donut-tip" id="tip-circle" cx="100" cy="100" r="80" />
                            <text class="donut-text" x="100" y="95" text-anchor="middle">
                                <tspan class="donut-value" id="tip-percent-display">15%</tspan>
                            </text>
                            <text class="donut-label" x="100" y="115" text-anchor="middle">pourboire</text>
                        </svg>
                    </div>

                    <div class="result-main">
                        <div class="result-value" id="total-value" data-value="0">0.00 ‚Ç¨</div>
                        <div class="result-label">Total √† payer</div>
                    </div>

                    <div class="breakdown">
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üçΩÔ∏è</span>
                            <span>Addition</span>
                            <strong id="addition-value">0.00 ‚Ç¨</strong>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üíù</span>
                            <span>Pourboire</span>
                            <strong id="tip-value">0.00 ‚Ç¨</strong>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üë§</span>
                            <span>Par personne</span>
                            <strong id="per-person-value">0.00 ‚Ç¨</strong>
                        </div>
                    </div>

                    <button class="btn-secondary" onclick="saveCalculation('pourboire')">
                        üíæ Sauvegarder ce calcul
                    </button>
                </div>
            </div>

            <!-- Calculateur IMC -->
            <div id="imc" class="calculator">
                <h2>‚öñÔ∏è Calculateur d'IMC</h2>

                <div class="input-group floating-label">
                    <input type="number" id="poids" placeholder=" " step="0.1" min="0" required>
                    <label for="poids">Poids (kg)</label>
                    <span class="input-icon">‚öñÔ∏è</span>
                </div>

                <div class="input-group floating-label">
                    <input type="number" id="taille" placeholder=" " step="0.1" min="0" required>
                    <label for="taille">Taille (cm)</label>
                    <span class="input-icon">üìè</span>
                </div>

                <button class="btn-primary" onclick="calculerIMC()" data-ripple>
                    <span class="btn-text">Calculer mon IMC</span>
                    <span class="btn-icon">‚Üí</span>
                </button>

                <div id="result-imc" class="result">
                    <!-- Jauge circulaire IMC -->
                    <div class="imc-gauge-container">
                        <svg class="imc-gauge" viewBox="0 0 220 130">
                            <!-- Arc de fond gris -->
                            <path d="M 20 110 A 90 90 0 0 1 200 110" 
                                  fill="none" 
                                  stroke="#e9ecef" 
                                  stroke-width="20" 
                                  stroke-linecap="round" />
                            
                            <!-- Segments color√©s (IMC < 18.5 - Insuffisance) -->
                            <path class="gauge-segment gauge-underweight" 
                                  d="M 20 110 A 90 90 0 0 1 65 37" 
                                  fill="none" 
                                  stroke-width="20" 
                                  stroke-linecap="round" />
                            
                            <!-- Segments color√©s (IMC 18.5-25 - Normal) -->
                            <path class="gauge-segment gauge-normal" 
                                  d="M 65 37 A 90 90 0 0 1 155 37" 
                                  fill="none" 
                                  stroke-width="20" 
                                  stroke-linecap="round" />
                            
                            <!-- Segments color√©s (IMC 25-30 - Surpoids) -->
                            <path class="gauge-segment gauge-overweight" 
                                  d="M 155 37 A 90 90 0 0 1 185 80" 
                                  fill="none" 
                                  stroke-width="20" 
                                  stroke-linecap="round" />
                            
                            <!-- Segments color√©s (IMC > 30 - Ob√©sit√©) -->
                            <path class="gauge-segment gauge-obese" 
                                  d="M 185 80 A 90 90 0 0 1 200 110" 
                                  fill="none" 
                                  stroke-width="20" 
                                  stroke-linecap="round" />
                            
                            <!-- Aiguille -->
                            <g id="imc-needle" style="transform-origin: 110px 110px; transform: rotate(-90deg);">
                                <line x1="110" y1="110" x2="110" y2="35" 
                                      stroke="#333" 
                                      stroke-width="4" 
                                      stroke-linecap="round" />
                                <circle cx="110" cy="110" r="10" fill="#667eea" stroke="white" stroke-width="3" />
                            </g>
                        </svg>
                        
                        <div class="gauge-labels">
                            <span class="gauge-label" style="left: 5%;">18.5</span>
                            <span class="gauge-label" style="left: 30%;">25</span>
                            <span class="gauge-label" style="left: 65%;">30</span>
                            <span class="gauge-label" style="left: 90%;">35+</span>
                        </div>
                    </div>

                    <div class="result-main">
                        <div class="result-value" id="imc-value" data-value="0">0.0</div>
                        <div class="result-label">Indice de Masse Corporelle</div>
                    </div>

                    <div id="imc-category" class="imc-category"></div>

                    <div class="imc-info">
                        <p id="imc-description"></p>
                    </div>

                    <button class="btn-secondary" onclick="saveCalculation('imc')">
                        üíæ Sauvegarder ce calcul
                    </button>
                </div>
            </div>

            <!-- Convertisseur d'Unit√©s -->
            <div id="conversion" class="calculator">
                <h2>üîÑ Convertisseur d'Unit√©s</h2>

                <div class="input-group">
                    <label for="type-conversion">Type de conversion</label>
                    <select id="type-conversion" onchange="updateUnits()">
                        <option value="longueur">üìè Longueur</option>
                        <option value="poids">‚öñÔ∏è Poids</option>
                        <option value="temperature">üå°Ô∏è Temp√©rature</option>
                        <option value="volume">üß™ Volume</option>
                    </select>
                </div>

                <div class="conversion-row">
                    <div class="input-group">
                        <label for="unite-source">De</label>
                        <select id="unite-source" onchange="convertir()"></select>
                    </div>

                    <button class="swap-btn" onclick="inverserUnites()" data-ripple>
                        <span class="swap-icon">‚áÑ</span>
                    </button>

                    <div class="input-group">
                        <label for="unite-cible">Vers</label>
                        <select id="unite-cible" onchange="convertir()"></select>
                    </div>
                </div>

                <div class="input-group floating-label">
                    <input type="number" id="valeur-source" placeholder=" " step="any" oninput="convertir()">
                    <label for="valeur-source">Valeur</label>
                    <span class="input-icon">üî¢</span>
                </div>

                <div id="result-conversion" class="result">
                    <!-- Animation de conversion -->
                    <div class="conversion-animation">
                        <div class="conversion-flow">
                            <span id="source-display">0</span>
                            <span class="flow-arrow">‚Üí</span>
                            <span id="target-display">0</span>
                        </div>
                    </div>

                    <div class="result-main">
                        <div class="result-value" id="valeur-cible" data-value="0">0</div>
                        <div class="result-label" id="conversion-label"></div>
                    </div>

                    <button class="btn-secondary" onclick="saveCalculation('conversion')">
                        üíæ Sauvegarder ce calcul
                    </button>
                </div>
            </div>

            <!-- Historique -->
            <div id="historique" class="calculator">
                <h2>üìä Historique des Calculs</h2>
                
                <div class="history-controls">
                    <button class="btn-secondary" onclick="clearHistory()">
                        üóëÔ∏è Effacer l'historique
                    </button>
                </div>

                <div id="history-list" class="history-list">
                    <div class="empty-state">
                        <div class="empty-icon">üì≠</div>
                        <p>Aucun calcul enregistr√©</p>
                        <small>Vos calculs sauvegard√©s appara√Ætront ici</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>‚ú® Version Premium - Exp√©rience am√©lior√©e</p>
        </div>
    </div>

    <!-- Notifications Toast -->
    <div id="toast-container"></div>
</body>

</html>
